
Setup an experiment on Cloudlab using the SparkFHE-Dist-Ubuntu18.04 image. Use the Wisconsin server.

Please note that the scripts are designed to run on Master Node.

# SSH into Master Node
SSH into the master node and navigate to the address specified below:
```
cd /spark-3.0.0-SNAPSHOT-bin-SparkFHE/SparkFHE-Addon/scripts/cluster/yarn_cluster_setup
```

# Install Hadoop and Configure Spark on all nodes through Master Node
Specify the hostnames of nodes as arguments.
```
sudo bash install_yarn_cluster.sh master,worker1,worker2 ...
```

# Start Yarn Spark Cluster and Run Spark Job on Master
Cluster can only be started on master node after installation is complete on all nodes and configuration files for Yarn and Spark are placed in correct folders.
```
sudo bash start_yarn_cluster.sh
```

# Run Test Spark Job on Master
Use the link generated after successful completion of cluster building to view the web interface for Yarn.
```
cd test_scripts
sudo bash run_spark_test_job_pi.sh
```

### Useful Links: 
Other links can be generated by changing the port number.

YARN Interface:

http://<MASTER_NODE_IP_ADDRESS>:8088

Spark Interface:

http://<MASTER_NODE_IP_ADDRESS>:8080/

Namenode Interface:

http://<MASTER_NODE_IP_ADDRESS>:50070/

Datanode Interface:

http://<WORKER_NODE_IP_ADDRESS>:50075/

JobMaster Interface:

http://<MASTER_NODE_IP_ADDRESS>:19888/

# Stop the Cluster
```
cd ..
sudo bash stop_yarn_job.sh
```
After running this command, the web interfaces will not work.